<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>THE FINAL COUNTDOWN</title>
  <style>
    :root{
      /* default = green theme */
      --neon:#00ff88;
      --neon-rgb: 0,255,136;
      --bg1:#000000;
      --bg2:#0a0a0a;
      --accent:#00ff88;
      --text:#e6ffe6;
    }
    html, body {
      height: 100%;
      margin: 0;
      background: radial-gradient(1200px 800px at 50% 50%, var(--bg2), var(--bg1) 70%);
      color: var(--text);
      font-family: 'Impact', 'Orbitron', 'Bebas Neue', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      overflow: hidden;
      user-select: none;
    }

    /* Animated grid background */
    .grid {
      position: absolute;
      inset: 0;
      background:
        linear-gradient(transparent 24px, rgba(var(--neon-rgb),0.08) 25px) 0 0/100% 25px,
        linear-gradient(90deg, transparent 24px, rgba(var(--neon-rgb),0.08) 25px) 0 0/25px 100%;
      filter: drop-shadow(0 0 6px rgba(var(--neon-rgb),0.25));
      animation: gridMove 12s linear infinite;
      pointer-events: none;
    }
    @keyframes gridMove {
      from { transform: translateY(0); }
      to { transform: translateY(25px); }
    }

    /* Glow ring */
    .halo {
      position:absolute; inset: -20% -10% -10% -10%;
      background: radial-gradient(circle at center, rgba(var(--neon-rgb),0.08), rgba(0,0,0,0) 55%);
      filter: blur(20px);
      animation: haloPulse 3s ease-in-out infinite;
      pointer-events:none;
    }
    @keyframes haloPulse {
      0%,100%{opacity:0.6}
      50%{opacity:1}
    }

    .container{
      position: relative;
      z-index: 2;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 24px;
      gap: 16px;
    }

    .title{
      font-size: clamp(2.2rem, 4vw + 1rem, 6rem);
      letter-spacing: 6px;
      margin: 0;
      text-shadow:
        0 0 20px var(--neon),
        0 0 60px var(--neon);
      filter: saturate(1.2);
      position: relative;
      display:inline-block;
    }

    /* Subtle glitch effect */
    .title::after, .title::before{
      content: attr(data-text);
      position:absolute; left:0; top:0; width:100%;
      clip-path: inset(0 0 0 0);
      opacity:0.75;
      mix-blend-mode: screen;
      pointer-events:none;
    }
    .title::before{ color:#00ffaa; transform: translate(1px,0); animation: glitch1 2.5s infinite; }
    .title::after{ color:#ff0044; transform: translate(-1px,0); animation: glitch2 3s infinite; }
    @keyframes glitch1 { 0%{clip-path: inset(0 0 85% 0)} 10%{clip-path: inset(0 0 20% 0)} 20%{clip-path: inset(0 0 60% 0)} 30%{clip-path: inset(0 0 5% 0)} 40%{clip-path: inset(0 0 40% 0)} 100%{clip-path: inset(0 0 85% 0)} }
    @keyframes glitch2 { 0%{clip-path: inset(90% 0 0 0)} 10%{clip-path: inset(70% 0 0 0)} 20%{clip-path: inset(30% 0 0 0)} 30%{clip-path: inset(10% 0 0 0)} 40%{clip-path: inset(50% 0 0 0)} 100%{clip-path: inset(90% 0 0 0)} }

    .subtitle{
      font-size: clamp(1rem, 1.2vw + .6rem, 1.5rem);
      opacity: .9;
      letter-spacing: 2px;
    }

    .countdown{
      display:flex; gap:min(3vw,28px);
      align-items:flex-end; justify-content:center;
      margin-block: clamp(8px, 2vh, 20px);
      filter: drop-shadow(0 0 20px rgba(var(--neon-rgb),0.55));
      flex-wrap: nowrap;
    }
    .unit{
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      padding: clamp(8px, 1.5vw, 14px) clamp(12px, 2.5vw, 20px);
      border: 2px solid rgba(var(--neon-rgb),0.25);
      border-radius: 16px;
      background: linear-gradient(180deg, rgba(var(--neon-rgb),0.08), rgba(0,0,0,0.3));
      min-width: clamp(90px, 18vw, 220px);
      transition: transform 100ms ease;
    }
    .value{
      font-size: clamp(2.5rem, 8vw, 9rem);
      line-height: 0.9;
      font-weight: 900;
      text-shadow: 0 0 25px var(--neon), 0 0 70px var(--neon);
    }
    .label{
      font-size: clamp(0.9rem, 1.5vw, 1.4rem);
      letter-spacing: 3px;
      opacity:0.85;
      margin-top: 6px;
    }

    .controls{
      display:flex; gap:12px; flex-wrap:wrap; align-items:center; justify-content:center;
      margin-top: 6px;
    }
    button, .file-label, input[type="range"]{
      font-family: inherit;
      border:1px solid rgba(var(--neon-rgb),0.35);
      border-radius: 14px;
      background: rgba(0,0,0,0.35);
      color: var(--text);
      padding: 10px 14px;
      cursor:pointer;
      transition: transform 120ms ease, box-shadow 120ms ease, border-color 120ms;
      box-shadow: 0 0 12px rgba(var(--neon-rgb),0.15) inset, 0 0 12px rgba(var(--neon-rgb),0.15);
    }
    button:hover, .file-label:hover{
      transform: translateY(-2px);
      border-color: var(--neon);
      box-shadow: 0 0 18px rgba(var(--neon-rgb),0.35), 0 0 18px rgba(var(--neon-rgb),0.35) inset;
    }
    .file-input{ display:none; }
    .file-label{ display:inline-flex; align-items:center; gap:8px; }

    .footer{
      position: fixed;
      left: 0; right: 0; bottom:10px;
      width:100%; text-align:center;
      font-size: 0.95rem; opacity:0.8; letter-spacing: 1.5px;
      z-index: 3;
      pointer-events: none;
    }

    /* Visualizer */
    canvas#viz {
      position: absolute; bottom: 0; left: 0; right: 0;
      height: 28vh; width: 100%;
      opacity: 0.45;
      filter: drop-shadow(0 0 14px rgba(var(--neon-rgb),0.4));
      pointer-events: none;
      z-index: 0;
    }

    /* Shake on bass */
    .shake { animation: shake 250ms cubic-bezier(.36,.07,.19,.97) both; }
    @keyframes shake {
      10%, 90% { transform: translate3d(-1px, 0, 0); }
      20%, 80% { transform: translate3d(2px, 0, 0); }
      30%, 50%, 70% { transform: translate3d(-3px, 0, 0); }
      40%, 60% { transform: translate3d(3px, 0, 0); }
    }

    /* Progress ring around title */
    .ring {
      position:absolute; width:min(80vmin, 720px); aspect-ratio:1 / 1;
      border-radius:50%;
      box-shadow: 0 0 80px rgba(var(--neon-rgb),0.2);
      pointer-events:none;
    }
    .ring::before {
      content:"";
      position:absolute; inset: -10px;
      border-radius:50%;
      background:
        conic-gradient(from 0turn, var(--neon) var(--progress, 0%), rgba(var(--neon-rgb),0.08) 0%);
      -webkit-mask:
        radial-gradient(circle at center, transparent 64%, black 66%);
      mask:
        radial-gradient(circle at center, transparent 64%, black 66%);
      filter: blur(1.5px) saturate(1.6);
      transition: --progress 1s ease;
    }

    .hint {
      font-size: 0.85rem; opacity: 0.7; margin-top: 2px;
    }

    /* Switch arrows */
    .switcher{
      position: fixed;
      right: 16px; top: 50%;
      translate: 0 -50%;
      z-index: 10;
      display: flex; flex-direction: column; gap: 10px;
    }
    .arrow-btn{
      width: 54px; height: 54px; border-radius: 50%;
      border: 2px solid rgba(var(--neon-rgb),0.5);
      background: radial-gradient(circle at 30% 30%, rgba(var(--neon-rgb),0.15), rgba(0,0,0,0.4));
      color: var(--text);
      display: grid; place-items: center;
      font-size: 22px; line-height: 1;
      box-shadow: 0 0 12px rgba(var(--neon-rgb),0.35);
      cursor: pointer;
      transition: transform 160ms ease, box-shadow 160ms ease, border-color 160ms ease;
    }
    .arrow-btn:hover{
      transform: translateX(-2px) scale(1.04);
      border-color: var(--neon);
      box-shadow: 0 0 20px rgba(var(--neon-rgb),0.5);
    }

    /* Wipe overlay for theme transition */
    .wipe{
      position: fixed; inset: 0; z-index: 9;
      pointer-events: none;
      clip-path: circle(0% at 90% 50%);
      transition: clip-path 600ms ease-in-out;
      will-change: clip-path;
    }
    .wipe.show{ clip-path: circle(150% at 90% 50%); }

    /* Song picker skin pour matcher les boutons */
    #songPicker{
      font-family: inherit;
      border:1px solid rgba(var(--neon-rgb),0.35);
      border-radius: 14px;
      background: rgba(0,0,0,0.35);
      color: var(--text);
      padding: 10px 12px;
      box-shadow: 0 0 12px rgba(var(--neon-rgb),0.15) inset, 0 0 12px rgba(var(--neon-rgb),0.15);
    }
    #songPicker:focus { outline: none; border-color: var(--neon); }
    #reloadSongs{ width: 44px; padding: 10px 0; }

  </style>
</head>
<body>
  <div class="halo"></div>
  <div class="grid"></div>

  <!-- theme wipe overlay (background uses its own CSS vars) -->
  <div id="wipe" class="wipe"></div>

  <div class="switcher" aria-label="Changer d'√©v√©nement">
    <button id="nextEvent" class="arrow-btn" title="Suivant (‚Üí)">‚ñ∂</button>
  </div>

  <div class="container" id="container">
    <div class="ring" id="ring"></div>
    <h1 class="title" id="title" data-text="CHAD HOUSE COUNTDOWN">CHAD HOUSE COUNTDOWN</h1>
    <div class="subtitle" id="subtitle">Jusqu'au d√©m√©nagement</div>

    <div class="countdown" id="countdown">
      <div class="unit"><div id="days" class="value">--</div><div class="label">JOURS</div></div>
      <div class="unit"><div id="hours" class="value">--</div><div class="label">HEURES</div></div>
      <div class="unit"><div id="minutes" class="value">--</div><div class="label">MINUTES</div></div>
      <div class="unit"><div id="seconds" class="value">--</div><div class="label">SECONDES</div></div>
    </div>

    <h2 class="title" id="completion">-- %</h2>

    <div class="controls">
      <button id="fsBtn">Plein √©cran</button>
      <select id="songPicker" title="Choisir une musique" style="min-width:220px"></select>
      <label><input id="volume" type="range" min="0" max="1" step="0.01" value="0.65" aria-label="Volume"></label>
      <button id="playPauseBtn" onclick="document.getElementById('audio').paused ? document.getElementById('audio').play() : document.getElementById('audio').pause();">
        ‚ñ∂Ô∏è/‚è∏Ô∏è
      </button>
    </div>
    
    <div class="footer" id="footer">üè† Dossier valid√© le 13 octobre. Objectif : 1er novembre 2025 ‚Äî 09:00 (heure de Paris) üí™</div>
  </div>

  <canvas id="viz"></canvas>

  <!-- Hidden audio element -->
  <audio id="audio" preload="auto" src="music1.mp3" loop autoplay></audio>

    <script src="countdown.js"></script>
</body>
</html>
